# 网络通信协议

- **网络通信协议**：通过计算机网络可以使多台计算机实现连接，位于同一个网络中的计算机在进行连接和通信的时候需要遵守一定的规则，这些连接和通信的规则被称为网络协议，它对数据的传输格式、传输速率、传输步骤等等做了一系列规定，通信双方必须遵守这些规定才能互相通信。

- **TCP/IP协议**：传输控制协议/因特网互联协议（Transmission Control Protocol/Internet Protocol），是Internet最基本、最广泛的协议。它定义了计算机如何连入因特网，以及数据如何在他们之间传输的标准。内部包含了一系列用于处理数据通信的协议，并采用了4层的分层模型 ，每一层都呼叫下一层提供的协议来完成自己的需求。

![TCP/IP协议的四层模型](http://oos.sfzzz.xyz/2020_07_22_17_57_31_1.png)

## 网络通信协议分类

`java.net` 包中包含的类和接口，提供了低层次的通信细节，可以直接使用这些类和接口，来专注网络程序开发。该包中提供了两种常见的网络协议支持：

- UDP：用户数据报协议（User Datagram Protocol）。UDP协议是无连接通信协议，即在数据传输是，数据的发送端和接收端不建立逻辑连接。简单来说，当一台计算机向另外一台计算机发送数据时，发送端不会确认接收端是否存在，就会发出数据，同样接收端接收数据时，也不会向发送端反馈是否收到数据。由于使用UDP协议消耗资源小，通信效率高，所以通常会用于音频、视频、普通数据的传输。但是UDP面向无连接性，不能保证数据的完整性，因此在传输重要的数据时，不建议使用UDP协议。

  特点：数据被限制在了64kb以内，超出这个范围就不能发送了。

  数据报（Datagram）：网络传输基本单位。

- TCP：传输控制协议（Transmission Control Protocol）。TCP协议是面向连接的通信协议，即传输数据之前，在发送端和接收端建立逻辑连接，然后再传输数据，它提供了两台计算机计算机之间可靠无差错的出具传输。

  在TCP连接中必须要明确客户端与服务端，由客户端向服务器端发送连接请求，每次连接的创建都要经过"三次握手"。

  - 三次握手：TCP协议中，在发送数据的准备阶段，客户端与服务端之间的三次交互，以保证连接的可靠性。
    - 第一次握手，客户端向服务端发送连接请求，等待服务器确认。
    - 第二次握手，服务端向客户端回送一个响应，通知客户端收到了连接请求。
    - 第三次握手，客户端再次向服务端发送确认信息，确认连接，整个交互过程如下图所示：![三次握手](http://oos.sfzzz.xyz/2020_07_22_21_16_40_1.png)
  - 完成三次握手，建立连接之后，客户端和服务端就可以开始数据传输了，由于这种面向连接的特性，TCP协议可以保证传输数据的安全，所以应用十分广泛，例如下载文件，浏览网页等等。

# 网络编程三要素

## 协议

计算机通信需要遵守的协议

## IP地址

**IP地址**：指互联网协议地址（Internet Protocol Address），俗称IP。IP用来给一个网络中的计算机设备做唯一的编号。

IP地址分类：

- IPv4：一个32位的二进制数，通常被分为4个字节，一个字节八位，表示为`a.b.c.d`的形式，其中a,b,c,d都是0-255的数字，因为八位二进制数最多只能表示到256。例如`192.168.1.1`
- IPv6：为了扩大地址空间，未来IP地址会通过IPv6重新定义，采用128位长度，每16位一组，分成8组，每组两个字节，两个十六进制数字。解决IP地址不够的问题。

## 端口号

网络通信本质是两个进程（应用程序）的通信，每台计算机都有很多进程，为了区分各个进程，就有了端口号。端口号可以唯一标识设备中的应用程序。

- 端口号：用两个字节标识的整数，取值范围是0-65535。其中，0-1023之间的端口号用于一些知名的网络服务和应用，普通的应用程序需要使用1024以上的端口号。如果端口号被另外一个程序或者服务占用了，则会导致当前程序启动失败。

利用 协议+IP地址+端口号 就可以标识网络中的进程了，就可以相互通信了。



此处暂且搁置，https://www.bilibili.com/video/BV1Ak4y1o7y8?p=402

